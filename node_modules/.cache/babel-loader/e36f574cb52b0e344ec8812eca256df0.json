{"ast":null,"code":"var _jsxFileName = \"E:\\\\UT - Semester 1\\\\YouTubeClone\\\\frontend\\\\src\\\\components\\\\Comments.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Comment from \"./Comment\";\nimport { axiosInstance } from \"../utils/axiosConfig\";\nimport Swal from \"sweetalert2\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  color: ${({\n  theme\n}) => theme.text};\n`;\nconst NewComment = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 20px;\n`;\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-color: #999;\n`;\nconst Input = styled.input`\n  width: 100%;\n  padding: 5px;\n  border: none;\n  border-bottom: 1px solid ${({\n  theme\n}) => theme.softHr};\n  background-color: transparent;\n  color: ${({\n  theme\n}) => theme.text};\n  outline: none;\n`;\nconst EmptyCommentsText = styled.span``;\nconst Button = styled.button`\n  padding: 5px 15px;\n  background-color: transparent;\n  border: 1px solid #3ea6ff;\n  color: #3ea6ff;\n  cursor: pointer;\n  border-radius: 3px;\n  font-weight: 500;\n`;\nconst ButtonsContainer = styled.div`\n  display: flex;\n  justify-content: end;\n  gap: 5px;\n`;\nconst Comments = ({\n  videoId,\n  loggedInUser\n}) => {\n  const [comments, setComments] = useState([]);\n  const [newCommentText, setNewCommentText] = useState(\"\");\n  const [toggleCommentButtons, settoggleCommentButtons] = useState(false);\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const res = await axiosInstance.get(`/comments/${videoId}`);\n        console.log(res.data);\n        setComments(prev => res.data.comments);\n      } catch (error) {\n        console.log(error);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Error\",\n          text: error.response.data.error || \"Error while fetching comments\"\n        });\n      }\n    };\n    fetchComments();\n  }, [videoId]);\n  const handleCommentSubmission = async e => {\n    console.log(newCommentText);\n    if (!loggedInUser) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Oops...\",\n        text: \"Sign In required!\"\n      });\n      settoggleCommentButtons(prev => false);\n      return;\n    }\n    try {\n      const res = await axiosInstance.post(`/comments`, {\n        videoId,\n        description: newCommentText\n      });\n      Swal.fire(`Good job!`, \"Your comment was Successful!\", \"success\");\n      setComments(prev => [...prev, res.data.comment]);\n      setNewCommentText(\"\");\n      settoggleCommentButtons(prev => false);\n    } catch (error) {\n      console.log(error);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: error.response.data.error || \"Unable to post a comment\"\n      });\n    }\n  };\n  const handleCancel = e => {\n    setNewCommentText(\"\");\n    settoggleCommentButtons(prev => false);\n  };\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, loggedInUser && /*#__PURE__*/React.createElement(NewComment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.img,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Add a comment...\",\n    value: newCommentText,\n    onChange: e => setNewCommentText(e.target.value),\n    onFocus: e => settoggleCommentButtons(prev => true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ButtonsContainer, {\n    style: {\n      display: !toggleCommentButtons && \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCommentSubmission,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, \"Comment\")), comments.length > 0 ? comments.map(comment => /*#__PURE__*/React.createElement(Comment, {\n    key: comment._id,\n    comment: comment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(EmptyCommentsText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, \"No Comments for this video\"));\n};\nexport default Comments;","map":{"version":3,"names":["React","useEffect","useState","styled","Comment","axiosInstance","Swal","Container","div","theme","text","NewComment","Avatar","img","Input","input","softHr","EmptyCommentsText","span","Button","button","ButtonsContainer","Comments","videoId","loggedInUser","comments","setComments","newCommentText","setNewCommentText","toggleCommentButtons","settoggleCommentButtons","fetchComments","res","get","console","log","data","prev","error","fire","icon","title","response","handleCommentSubmission","e","post","description","comment","handleCancel","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","placeholder","value","onChange","target","onFocus","style","display","onClick","length","map","key","_id"],"sources":["E:/UT - Semester 1/YouTubeClone/frontend/src/components/Comments.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Comment from \"./Comment\";\r\nimport { axiosInstance } from \"../utils/axiosConfig\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n  color: ${({ theme }) => theme.text};\r\n`;\r\n\r\nconst NewComment = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  background-color: #999;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 5px;\r\n  border: none;\r\n  border-bottom: 1px solid ${({ theme }) => theme.softHr};\r\n  background-color: transparent;\r\n  color: ${({ theme }) => theme.text};\r\n  outline: none;\r\n`;\r\n\r\nconst EmptyCommentsText = styled.span``;\r\n\r\nconst Button = styled.button`\r\n  padding: 5px 15px;\r\n  background-color: transparent;\r\n  border: 1px solid #3ea6ff;\r\n  color: #3ea6ff;\r\n  cursor: pointer;\r\n  border-radius: 3px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst ButtonsContainer = styled.div`\r\n  display: flex;\r\n  justify-content: end;\r\n  gap: 5px;\r\n`;\r\n\r\nconst Comments = ({ videoId, loggedInUser }) => {\r\n  const [comments, setComments] = useState([]);\r\n  const [newCommentText, setNewCommentText] = useState(\"\");\r\n  const [toggleCommentButtons, settoggleCommentButtons] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await axiosInstance.get(`/comments/${videoId}`);\r\n        console.log(res.data);\r\n        setComments((prev) => res.data.comments);\r\n      } catch (error) {\r\n        console.log(error);\r\n        Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Error\",\r\n          text: error.response.data.error || \"Error while fetching comments\",\r\n        });\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [videoId]);\r\n\r\n  const handleCommentSubmission = async (e) => {\r\n    console.log(newCommentText);\r\n    if (!loggedInUser) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Oops...\",\r\n        text: \"Sign In required!\",\r\n      });\r\n      settoggleCommentButtons((prev) => false);\r\n      return;\r\n    }\r\n    try {\r\n      const res = await axiosInstance.post(`/comments`, {\r\n        videoId,\r\n        description: newCommentText,\r\n      });\r\n      Swal.fire(`Good job!`, \"Your comment was Successful!\", \"success\");\r\n      setComments((prev) => [...prev, res.data.comment]);\r\n      setNewCommentText(\"\");\r\n      settoggleCommentButtons((prev) => false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: error.response.data.error || \"Unable to post a comment\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = (e) => {\r\n    setNewCommentText(\"\");\r\n    settoggleCommentButtons((prev) => false);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      {loggedInUser && (\r\n        <NewComment>\r\n          <Avatar src={loggedInUser?.img} />\r\n          <Input\r\n            placeholder=\"Add a comment...\"\r\n            value={newCommentText}\r\n            onChange={(e) => setNewCommentText(e.target.value)}\r\n            onFocus={(e) => settoggleCommentButtons((prev) => true)}\r\n          />\r\n        </NewComment>\r\n      )}\r\n\r\n      <ButtonsContainer style={{ display: !toggleCommentButtons && \"none\" }}>\r\n        <Button onClick={handleCancel}>Cancel</Button>\r\n        <Button onClick={handleCommentSubmission}>Comment</Button>\r\n      </ButtonsContainer>\r\n      {comments.length > 0 ? (\r\n        comments.map((comment) => (\r\n          <Comment key={comment._id} comment={comment} />\r\n        ))\r\n      ) : (\r\n        <EmptyCommentsText>No Comments for this video</EmptyCommentsText>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}