{"ast":null,"code":"var _jsxFileName = \"E:\\\\github-projects\\\\kidtube\\\\frontend\\\\src\\\\components\\\\Comments.jsx\",\n  _s = $RefreshSig$();\nimport { axiosInstance } from \"../utils/axiosConfig\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport Comment from \"./Comment\";\nimport Swal from \"sweetalert2\";\nimport { useNavigate } from \"react-router-dom\";\nimport { commenting } from \"../redux/videoSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div``;\n_c = Container;\nconst NewComment = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c2 = NewComment;\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n`;\n_c3 = Avatar;\nconst Input = styled.input`\n  border: none;\n  border-bottom: 1px solid ${({\n  theme\n}) => theme.soft};\n  color: ${({\n  theme\n}) => theme.text};\n  background-color: transparent;\n  outline: none;\n  padding: 5px;\n  width: 100%;\n`;\n_c4 = Input;\nconst Button = styled.button`\n  padding: 7px 15px;\n  background-color: transparent;\n  border: 1px solid black;\n  color: white;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  cursor: pointer;\n  border-radius: 20px;\n  font-weight: 500;\n  background: black\n`;\n_c5 = Button;\nconst Comments = ({\n  videoId\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    loggedInUser\n  } = useSelector(state => state.user);\n  const [comments, setComments] = useState([]);\n  const [desc, setDesc] = useState({}); // user's comment\n  const {\n    currentVideo,\n    loading\n  } = useSelector(state => state.video);\n  const navigateToSignin = () => {\n    navigate('/signin');\n  };\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const res = await axiosInstance.get(`/comments/${videoId}`); // fetch all comments of a video\n        setComments(res.data);\n      } catch (err) {}\n    };\n    fetchComments();\n  }, [videoId]);\n  const handleComment = async e => {\n    e.preventDefault();\n    if (desc.length === 0) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Oops...\",\n        text: \"Comment not found!\"\n      });\n      return;\n    }\n    try {\n      await axiosInstance.post(`/comments`, {\n        desc,\n        videoId\n      });\n      dispatch(commenting(loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser._id));\n      Swal.fire(\"Good job!\", \"Comment added!\", \"success\");\n      // window.location.reload();\n      navigate(`/`);\n    } catch (error) {\n      console.log(error);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Error\",\n        text: \"Unable to add comment\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(NewComment, {\n      children: [loggedInUser ? /*#__PURE__*/_jsxDEV(Avatar, {\n        src: loggedInUser.img,\n        alt: \"channel-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 12\n      }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n        src: \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png\",\n        alt: \"channel-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        placeholder: \"Add a comment...\",\n        onChange: e => setDesc(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), loggedInUser ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleComment,\n        children: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 12\n      }, this) // TODO: post comment if user is loggedin\n      : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: navigateToSignin,\n        children: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), comments.map(comment => /*#__PURE__*/_jsxDEV(Comment, {\n      comment: comment\n    }, comment._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(Comments, \"MW0377B2IEIaAo+FW3FTpGsBvAE=\", false, function () {\n  return [useDispatch, useNavigate, useSelector, useSelector];\n});\n_c6 = Comments;\nexport default Comments;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"NewComment\");\n$RefreshReg$(_c3, \"Avatar\");\n$RefreshReg$(_c4, \"Input\");\n$RefreshReg$(_c5, \"Button\");\n$RefreshReg$(_c6, \"Comments\");","map":{"version":3,"names":["axiosInstance","React","useEffect","useState","useDispatch","useSelector","styled","Comment","Swal","useNavigate","commenting","jsxDEV","_jsxDEV","Container","div","_c","NewComment","_c2","Avatar","img","_c3","Input","input","theme","soft","text","_c4","Button","button","_c5","Comments","videoId","_s","dispatch","navigate","loggedInUser","state","user","comments","setComments","desc","setDesc","currentVideo","loading","video","navigateToSignin","fetchComments","res","get","data","err","handleComment","e","preventDefault","length","fire","icon","title","post","_id","error","console","log","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","target","value","onClick","map","comment","_c6","$RefreshReg$"],"sources":["E:/github-projects/kidtube/frontend/src/components/Comments.jsx"],"sourcesContent":["import { axiosInstance } from \"../utils/axiosConfig\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\nimport Comment from \"./Comment\";\r\nimport Swal from \"sweetalert2\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { commenting } from \"../redux/videoSlice\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst NewComment = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  border: none;\r\n  border-bottom: 1px solid ${({ theme }) => theme.soft};\r\n  color: ${({ theme }) => theme.text};\r\n  background-color: transparent;\r\n  outline: none;\r\n  padding: 5px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 7px 15px;\r\n  background-color: transparent;\r\n  border: 1px solid black;\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  cursor: pointer;\r\n  border-radius: 20px;\r\n  font-weight: 500;\r\n  background: black\r\n`;\r\n\r\nconst Comments = ({videoId}) => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { loggedInUser } = useSelector((state) => state.user)\r\n  const [comments, setComments] = useState([]);\r\n  const [desc, setDesc] = useState({}); // user's comment\r\n  const { currentVideo, loading } = useSelector((state) => state.video);\r\n\r\n  const navigateToSignin = () => {\r\n    navigate('/signin');\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await axiosInstance.get(`/comments/${videoId}`); // fetch all comments of a video\r\n        setComments(res.data);\r\n      } catch (err) {}\r\n    };\r\n    fetchComments();\r\n  }, [videoId]);\r\n\r\n  const handleComment = async (e) => {\r\n    e.preventDefault();\r\n    if (desc.length === 0)\r\n      {\r\n        Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Oops...\",\r\n          text: \"Comment not found!\",\r\n        });\r\n        return;\r\n      }\r\n    try {\r\n      await axiosInstance.post(`/comments`, { desc, videoId });\r\n      dispatch(commenting(loggedInUser?._id));\r\n      Swal.fire(\r\n        \"Good job!\",\r\n        \"Comment added!\",\r\n        \"success\"\r\n      );\r\n      // window.location.reload();\r\n      navigate(`/`);\r\n    } catch (error) {\r\n      console.log(error);\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Error\",\r\n        text: \"Unable to add comment\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <NewComment>\r\n        { loggedInUser ?\r\n          (<Avatar src={loggedInUser.img} alt=\"channel-img\"/>)\r\n          :\r\n          (<Avatar src=\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png\" alt=\"channel-img\"/>)\r\n        }\r\n        <Input type=\"text\" \r\n          placeholder=\"Add a comment...\" \r\n          onChange={(e) => setDesc(e.target.value)}/>\r\n        {loggedInUser ? \r\n          (<Button onClick={handleComment}>Comment</Button>) // TODO: post comment if user is loggedin\r\n          :\r\n          (<Button onClick={navigateToSignin}>Comment</Button>)\r\n        }\r\n      </NewComment>\r\n      {comments.map(comment=>(\r\n        <Comment key={comment._id} comment={comment}/>\r\n      ))}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Comments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}